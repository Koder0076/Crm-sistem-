<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>
<style>
body { font-family: Arial; padding: 20px; background: #111; color: #fff; }
input, textarea, button { width: 100%; margin: 5px 0; padding: 8px; }
table { width: 100%; margin-top: 20px; border-collapse: collapse; }
td, th { border: 1px solid #444; padding: 6px; }
</style>
</head>
<body>

<h2>üîê Admin</h2>
<input id="pass" placeholder="Admin password">

<h3>üë§ Users</h3>
<button onclick="loadUsers()">Load users</button>
<table id="users"></table>

<h3>üí∞ Earn Blocks (JSON)</h3>
<textarea id="blocks" rows="10"></textarea>
<button onclick="saveBlocks()">Save blocks</button>

<h3>‚ö†Ô∏è Danger</h3>
<button onclick="wipe()">DELETE ALL DATA</button>

<script>
async function loadUsers() {
  const res = await fetch("/admin/users", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ password: pass.value })
  });
  const data = await res.json();
  users.innerHTML =
    "<tr><th>ID</th><th>Email</th><th>Name</th><th>Score</th></tr>" +
    data.map(u =>
      `<tr><td>${u.id}</td><td>${u.email}</td><td>${u.username}</td><td>${u.score}</td></tr>`
    ).join("");
}

async function saveBlocks() {
  await fetch("/admin/earn-blocks", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      password: pass.value,
      blocks: JSON.parse(blocks.value)
    })
  });
  alert("Saved");
}

async function wipe() {
  if (!confirm("DELETE EVERYTHING?")) return;
  await fetch("/admin/delete-all", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ password: pass.value })
  });
  alert("Deleted");
}
</script>

</body>
</html>